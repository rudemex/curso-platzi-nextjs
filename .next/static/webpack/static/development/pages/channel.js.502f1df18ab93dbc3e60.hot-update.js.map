{"version":3,"file":"static/webpack/static\\development\\pages\\channel.js.502f1df18ab93dbc3e60.hot-update.js","sources":["webpack:///./components/PodcastPlayer.js","webpack:///./pages/channel.js"],"sourcesContent":["import { Link } from '../routes'\r\nimport slug from '../helpers/slug'\r\n\r\nexport default class PodcastPlayer extends React.Component {\r\n    render() {\r\n        const { clip, onClose } = this.props\r\n\r\n        return <div className=\"modal\">\r\n            <div className='clip'>\r\n                <nav>\r\n                    { onClose ?\r\n                        <a onClick={onClose}>&lt; Volver</a>\r\n                        :\r\n                        <Link route='channel'\r\n                              params={{ slug: slug(clip.channel.title), id: clip.channel.id }}\r\n                              prefetch>\r\n                            <a className='close'>&lt; Volver</a>\r\n                        </Link>\r\n                    }\r\n                </nav>\r\n\r\n                <picture>\r\n                    <div style={{ backgroundImage: `url(${clip.urls.image || clip.channel.urls.logo_image.original})` }} />\r\n                </picture>\r\n\r\n                <div className='player'>\r\n                    <h3>{ clip.title }</h3>\r\n                    <h6>{ clip.channel.title }</h6>\r\n                    <audio controls autoPlay={true}>\r\n                        <source src={clip.urls.high_mp3} type='audio/mpeg' />\r\n                    </audio>\r\n                </div>\r\n            </div>\r\n\r\n            <style jsx>{`\r\n                nav {\r\n                    background: none;\r\n                }\r\n                nav a {\r\n                    display: inline-block;\r\n                    padding: 15px;\r\n                    color: white;\r\n                    cursor: pointer;\r\n                    text-decoration: none;\r\n                }\r\n                .clip {\r\n                    display: flex;\r\n                    height: 100%;\r\n                    flex-direction: column;\r\n                    background: #8756ca;\r\n                    color: white;\r\n                }\r\n                picture {\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n                    flex: 1 1;\r\n                    flex-direction: column;\r\n                    width: auto;\r\n                    padding: 10%;\r\n                }\r\n                picture div {\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    background-position: 50% 50%;\r\n                    background-size: contain;\r\n                    background-repeat: no-repeat;\r\n                }\r\n                .player {\r\n                    padding: 30px;\r\n                    background: rgba(0,0,0,0.3);\r\n                    text-align: center;\r\n                }\r\n                h3 {\r\n                    margin: 0;\r\n                }\r\n                h6 {\r\n                    margin: 0;\r\n                    margin-top: 1em;\r\n                }\r\n                audio {\r\n                    margin-top: 2em;\r\n                    width: 100%;\r\n                }\r\n\r\n                .modal {\r\n                    position: fixed;\r\n                    top: 0;\r\n                    left: 0;\r\n                    right: 0;\r\n                    bottom: 0;\r\n                    z-index: 99999;\r\n                }\r\n            `}</style>\r\n        </div>\r\n    }\r\n}","//import Link from 'next/link';\r\nimport Layout from \"../components/Layout\";\r\nimport ChannelGrid from \"../components/ChannelGrid\";\r\n//import PodcastList from \"../components/PodcastList\";\r\nimport PodcastListWithClick from '../components/PodcastListWithClick';\r\n// import Error from 'next/error';\r\nimport Error from './_error';\r\nimport PodcastPlayer from '../components/PodcastPlayer';\r\n\r\nexport default class extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            openPodcast: null\r\n        }\r\n    }\r\n\r\n    static async getInitialProps({ query, res }) {\r\n        let idChannel = query.id\r\n\r\n        try{\r\n            let [reqChannel, reqSeries, reqAudios] = await Promise.all([\r\n                fetch(`https://api.audioboom.com/channels/${idChannel}`),\r\n                fetch(`https://api.audioboom.com/channels/${idChannel}/child_channels`),\r\n                fetch(`https://api.audioboom.com/channels/${idChannel}/audio_clips`)\r\n            ]);\r\n\r\n            if( reqChannel.status >= 400 ) {\r\n                res.statusCode = reqChannel.status\r\n                return { channel: null, audioClips: null, series: null, statusCode: reqChannel.status }\r\n            }\r\n\r\n            let dataChannel = await reqChannel.json()\r\n            let channel = dataChannel.body.channel\r\n\r\n            let audioClips = (await reqAudios.json()).body.audio_clips\r\n            let series = (await reqSeries.json()).body.channels\r\n\r\n            return { channel, audioClips, series, statusCode: 200 }\r\n        }catch(e){\r\n            res.statusCode = 503\r\n            return { channel: null, audioClips: null, series: null, statusCode: 503 }\r\n        }\r\n    }\r\n\r\n    openPodcast = (event, podcast) => {\r\n        event.preventDefault();\r\n        this.setState({\r\n            openPodcast: podcast\r\n        })\r\n    };\r\n\r\n    render() {\r\n        const { channel, audioClips, series, statusCode } = this.props;\r\n        const { openPodcast } = this.state;\r\n\r\n        if( statusCode !== 200 ) {\r\n            return <Error statusCode={ statusCode } />\r\n        }\r\n\r\n        return <Layout title={`Podcasts | ${channel.title}` }>\r\n\r\n            <div className=\"banner\" style={{ backgroundImage: `url(${channel.urls.banner_image.original})` }} />\r\n\r\n            { openPodcast && <div>Hay un podcast abierto</div> }\r\n\r\n            <h1>{ channel.title }</h1>\r\n\r\n            { series.length > 0 &&\r\n            <div>\r\n                <h2>Series</h2>\r\n                <ChannelGrid channels={ series } />\r\n            </div>\r\n            }\r\n\r\n            <h2>Ultimos Podcasts</h2>\r\n            <PodcastListWithClick podcasts={ audioClips } onClickPodcast={ this.openPodcast } />\r\n\r\n            <style jsx>{`\r\n                .banner {\r\n                    width: 100%;\r\n                    padding-bottom: 25%;\r\n                    background-position: 50% 50%;\r\n                    background-size: cover;\r\n                    background-color: #aaa;\r\n                }\r\n\r\n                h1 {\r\n                    font-weight: 600;\r\n                    padding: 15px;\r\n                }\r\n\r\n                h2 {\r\n                    padding: 5px;\r\n                    font-size: 0.9em;\r\n                    font-weight: 600;\r\n                    margin: 0;\r\n                    text-align: center;\r\n                }\r\n            `}</style>\r\n        </Layout>\r\n    }\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;;;;;;;;;;;;AACA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAFA;AAGA;AAAA;AAKA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAtBA;AAAA;AAwFA;;;;AA5FA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAGA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAoCA;AACA;AAAA;AACA;AADA;AAGA;AACA;AAvCA;AACA;AADA;AAFA;AAKA;AACA;;;AAoCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAEA;AAAA;AAGA;AAAA;AACA;AAAA;AACA;AAAA;AAIA;AAAA;AACA;AAAA;AAAA;AAhBA;AAAA;AAyCA;;;;;;;;;;;;;AApFA;AACA;;;AAGA;AACA;;;;AADA;AAAA;AAAA;AACA;AAKA;;;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEA;AACA;;AADA;AACA;;AAEA;AACA;;AADA;;AACA;AACA;;AADA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AAlCA;AACA;;;;;A","sourceRoot":""}